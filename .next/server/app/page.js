(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2739:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o});var s=r(482),n=r(9108),a=r(2563),i=r.n(a),l=r(8300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);r.d(t,c);let o=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1136)),"C:\\Coding\\Virtual Trader\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1342)),"C:\\Coding\\Virtual Trader\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Coding\\Virtual Trader\\src\\app\\page.tsx"],u="/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8785:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},1214:()=>{},3045:(e,t,r)=>{Promise.resolve().then(r.bind(r,1844))},6377:(e,t,r)=>{"use strict";var s=r(7598).Symbol;e.exports=s},5945:(e,t,r)=>{"use strict";var s=r(6377),n=r(1370),a=r(3517),i=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?n(e):a(e)}},2894:(e,t,r)=>{"use strict";var s=r(9575),n=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(n,""):e}},2335:e=>{"use strict";var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},1370:(e,t,r)=>{"use strict";var s=r(6377),n=Object.prototype,a=n.hasOwnProperty,i=n.toString,l=s?s.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),r=e[l];try{e[l]=void 0;var s=!0}catch(e){}var n=i.call(e);return s&&(t?e[l]=r:delete e[l]),n}},3517:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7598:(e,t,r)=>{"use strict";var s=r(2335),n="object"==typeof self&&self&&self.Object===Object&&self,a=s||n||Function("return this")();e.exports=a},9575:e=>{"use strict";var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},3908:(e,t,r)=>{"use strict";var s=r(986),n=r(120),a=r(9155),i=Math.max,l=Math.min;e.exports=function(e,t,r){var c,o,d,u,x,h,m=0,p=!1,f=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function j(t){var r=c,s=o;return c=o=void 0,m=t,u=e.apply(s,r)}function g(e){var r=e-h,s=e-m;return void 0===h||r>=t||r<0||f&&s>=d}function b(){var e,r,s,a=n();if(g(a))return y(a);x=setTimeout(b,(e=a-h,r=a-m,s=t-e,f?l(s,d-r):s))}function y(e){return(x=void 0,v&&c)?j(e):(c=o=void 0,u)}function N(){var e,r=n(),s=g(r);if(c=arguments,o=this,h=r,s){if(void 0===x)return m=e=h,x=setTimeout(b,t),p?j(e):u;if(f)return clearTimeout(x),x=setTimeout(b,t),j(h)}return void 0===x&&(x=setTimeout(b,t)),u}return t=a(t)||0,s(r)&&(p=!!r.leading,d=(f="maxWait"in r)?i(a(r.maxWait)||0,t):d,v="trailing"in r?!!r.trailing:v),N.cancel=function(){void 0!==x&&clearTimeout(x),m=0,c=h=o=x=void 0},N.flush=function(){return void 0===x?u:y(n())},N}},986:e=>{"use strict";e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2111:e=>{"use strict";e.exports=function(e){return null!=e&&"object"==typeof e}},6381:(e,t,r)=>{"use strict";var s=r(5945),n=r(2111);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==s(e)}},120:(e,t,r)=>{"use strict";var s=r(7598);e.exports=function(){return s.Date.now()}},9155:(e,t,r)=>{"use strict";var s=r(2894),n=r(986),a=r(6381),i=0/0,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,o=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return i;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var r=c.test(e);return r||o.test(e)?d(e.slice(2),r?2:8):l.test(e)?i:+e}},1844:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(5344),n=r(3729),a=r(3908),i=r.n(a);let l="/api",c=async e=>{try{let t=await fetch(`/api/stocks${e?`?query=${e}`:""}`);if(!t.ok)throw console.error("API response not ok:",t.status),Error("API 요청 실패");return await t.json()}catch(e){return console.error("주식 데이터 조회 실패:",e),[]}},o=async(e,t)=>{try{let r=await fetch(`${l}/trade`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,...t})});if(!r.ok)throw Error("거래 실패");return r.json()}catch(e){throw console.error("거래 실패:",e),e}},d=async e=>{try{let t=await fetch(`${l}/portfolio?userId=${e}`);if(!t.ok)throw Error("포트폴리오 조회 실패");return t.json()}catch(e){return console.error("포트폴리오 조회 실패:",e),[]}},u=async e=>{try{let t=await fetch(`${l}/transactions?userId=${e}`);if(!t.ok)throw Error("거래내역 조회 실패");return t.json()}catch(e){return console.error("거래내역 조회 실패:",e),[]}},x=async e=>{try{let t=await fetch(`${l}/users/${e}`);if(!t.ok)throw Error("사용자 정보 조회 실패");return t.json()}catch(e){throw console.error("사용자 정보 조회 실패:",e),e}};function h({stocks:e,onSelectStock:t}){let[r,a]=(0,n.useState)(e);return(0,n.useEffect)(()=>{a(e)},[e]),(0,n.useEffect)(()=>{if(0===r.length)return;let e=setInterval(async()=>{try{let e=r.map(e=>e.symbol),t=(await Promise.all(e.map(e=>c(e)))).flat();a(e=>e.map(e=>t.find(t=>t.symbol===e.symbol)||e))}catch(e){console.error("가격 업데이트 실패:",e)}},5e3);return()=>clearInterval(e)},[r]),s.jsx("div",{className:"space-y-2",children:r.map(e=>s.jsx("div",{className:"p-2 border rounded cursor-pointer hover:bg-gray-100",onClick:()=>t(e),children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:[e.name," (",e.symbol,")"]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:`
                ${e.change>=0?"text-green-600":"text-red-600"}
                transition-colors duration-300
              `,children:[e.price.toLocaleString()," 원"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.change.toFixed(2),"%"]})]})]})},e.symbol))})}function m({stock:e}){let[t,r]=(0,n.useState)(0),a=async s=>{if(!e)return;let n={symbol:e.symbol,quantity:t,type:s};try{await o(1,n),alert(`${"BUY"===s?"매수":"매도"} 주문이 완료되었습니다.`),r(0)}catch(e){alert("주문 처리 중 오류가 발생했습니다.")}};return e?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold",children:e.name}),(0,s.jsxs)("p",{children:["현재가: ",e.price.toLocaleString()," 원"]})]}),(0,s.jsxs)("div",{children:[s.jsx("input",{type:"number",value:t,onChange:e=>r(Number(e.target.value)),placeholder:"수량",className:"w-full p-2 border rounded mb-2"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:()=>a("BUY"),className:"bg-red-500 text-white p-2 rounded",children:"매수"}),s.jsx("button",{onClick:()=>a("SELL"),className:"bg-blue-500 text-white p-2 rounded",children:"매도"})]})]})]}):s.jsx("p",{children:"종목을 선택해주세요"})}function p({userId:e}){let[t,r]=(0,n.useState)(null);(0,n.useEffect)(()=>{a()},[e]);let a=async()=>{try{let t=await d(e),s=t.reduce((e,t)=>e+t.quantity*t.current_price,0),n=t.reduce((e,t)=>e+(t.current_price-t.average_price)*t.quantity,0),a=t.reduce((e,t)=>{let r=t.stock_master.sector||"기타",s=t.quantity*t.current_price;return e[r]||(e[r]={value:0,percent:0}),e[r].value+=s,e},{});Object.values(a).forEach(e=>{e.percent=s>0?e.value/s*100:0}),r({totalValue:s,totalProfit:n,profitPercent:s>0?n/(s-n)*100:0,sectorDistribution:a})}catch(e){console.error("포트폴리오 분석 실패:",e)}};return t?(0,s.jsxs)("div",{className:"border rounded p-4 space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"포트폴리오 분석"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[s.jsx("div",{className:"text-gray-600",children:"총 평가금액"}),(0,s.jsxs)("div",{className:"text-xl font-bold",children:[t.totalValue.toLocaleString(),"원"]})]}),(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[s.jsx("div",{className:"text-gray-600",children:"총 손익"}),(0,s.jsxs)("div",{className:`text-xl font-bold ${t.totalProfit>=0?"text-green-600":"text-red-600"}`,children:[t.totalProfit.toLocaleString(),"원"]})]}),(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[s.jsx("div",{className:"text-gray-600",children:"수익률"}),(0,s.jsxs)("div",{className:`text-xl font-bold ${t.profitPercent>=0?"text-green-600":"text-red-600"}`,children:[t.profitPercent.toFixed(2),"%"]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"섹터별 분포"}),s.jsx("div",{className:"space-y-2",children:Object.entries(t.sectorDistribution).map(([e,t])=>(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm text-gray-600",children:e}),s.jsx("div",{className:"h-2 bg-gray-200 rounded",children:s.jsx("div",{className:"h-full bg-blue-500 rounded",style:{width:`${t.percent}%`}})})]}),(0,s.jsxs)("div",{className:"ml-4 text-sm",children:[t.percent.toFixed(1),"%"]})]},e))})]})]}):s.jsx("div",{children:"로딩 중..."})}function f({userId:e}){let[t,r]=(0,n.useState)([]);(0,n.useEffect)(()=>{a()},[e]);let a=async()=>{try{let t=await d(e);r(t)}catch(e){console.error("포트폴리오 로딩 실패:",e)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx(p,{userId:e}),(0,s.jsxs)("div",{className:"border rounded p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"보유 종목"}),0===t.length?s.jsx("p",{children:"보유 중인 종목이 없습니다."}):s.jsx("div",{className:"space-y-2",children:t.map(e=>(0,s.jsxs)("div",{className:"flex justify-between p-2 border rounded",children:[(0,s.jsxs)("div",{children:[s.jsx("span",{className:"font-semibold",children:e.stock_master.name}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.symbol,")"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{children:[e.quantity,"주"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["평균단가: ",e.average_price.toLocaleString(),"원"]})]})]},e.symbol))})]})]})}function v({userId:e}){let[t,r]=(0,n.useState)([]);(0,n.useEffect)(()=>{a()},[e]);let a=async()=>{try{let t=await u(e);r(t)}catch(e){console.error("거래 내역 로딩 실패:",e)}};return(0,s.jsxs)("div",{className:"border rounded p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"거래 내역"}),0===t.length?s.jsx("p",{children:"거래 내역이 없습니다."}):s.jsx("div",{className:"space-y-2",children:t.map(e=>(0,s.jsxs)("div",{className:"flex justify-between p-2 border rounded",children:[(0,s.jsxs)("div",{children:[s.jsx("span",{className:"BUY"===e.type?"text-red-600":"text-blue-600",children:"BUY"===e.type?"매수":"매도"}),s.jsx("span",{className:"ml-2",children:e.stock_master.name})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{children:[e.quantity,"주"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.price.toLocaleString(),"원"]})]})]},e.id))})]})}function j({userId:e}){let[t,r]=(0,n.useState)(null);(0,n.useEffect)(()=>{a()},[e]);let a=async()=>{try{let t=await x(e);r(t)}catch(e){console.error("사용자 정보 로딩 실패:",e)}};return t?(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"계좌 정보"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-gray-600",children:"사용자명"}),s.jsx("p",{className:"text-lg font-semibold",children:t.username})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-gray-600",children:"보유 현금"}),(0,s.jsxs)("p",{className:"text-lg font-semibold",children:[t.cash_balance.toLocaleString(),"원"]})]})]})]}):null}function g(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(null),[l,o]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),x=(0,n.useCallback)(i()(async e=>{if(!e.trim()){t([]);return}u(!0);try{let r=await c(e);t(r)}catch(e){console.error("검색 실패:",e)}finally{u(!1)}},300),[]);return(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx(j,{userId:1}),s.jsx(f,{userId:1}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"border rounded p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"주식 검색"}),s.jsx("div",{className:"mb-4",children:s.jsx("input",{type:"text",value:l,onChange:e=>{let t=e.target.value;o(t),x(t)},placeholder:"종목 검색...",className:"w-full p-2 border rounded"})}),d?s.jsx("div",{className:"text-center py-4",children:"검색 중..."}):s.jsx(h,{stocks:e,onSelectStock:a})]}),(0,s.jsxs)("div",{className:"border rounded p-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"가상 매매"}),s.jsx(m,{stock:r})]})]}),s.jsx(v,{userId:1})]})}},1342:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>i});var s=r(5036),n=r(3640),a=r.n(n);r(5023);let i={title:"주식 가상매매 시뮬레이터",description:"주식 거래 시뮬레이션 및 분석 플랫폼"};function l({children:e}){return s.jsx("html",{lang:"ko",children:(0,s.jsxs)("body",{className:a().className,children:[s.jsx("nav",{className:"bg-gray-800 text-white p-4",children:s.jsx("div",{className:"container mx-auto",children:s.jsx("h1",{className:"text-xl font-bold",children:"주식 가상매매 시뮬레이터"})})}),s.jsx("main",{className:"container mx-auto p-4",children:e})]})})}},1136:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>i});let s=(0,r(6843).createProxy)(String.raw`C:\Coding\Virtual Trader\src\app\page.tsx`),{__esModule:n,$$typeof:a}=s,i=s.default},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,225],()=>r(2739));module.exports=s})();