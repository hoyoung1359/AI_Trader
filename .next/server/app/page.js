(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2739:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>h,tree:()=>c});var r=t(482),a=t(9108),n=t(2563),l=t.n(n),i=t(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1136)),"C:\\Coding\\Virtual Trader\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1342)),"C:\\Coding\\Virtual Trader\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Coding\\Virtual Trader\\src\\app\\page.tsx"],x="/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8785:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},1214:()=>{},3045:(e,s,t)=>{Promise.resolve().then(t.bind(t,7363))},7363:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var r=t(5344),a=t(3729);let n="/api",l=async e=>{try{console.log("Fetching stocks with query:",e);let s=await fetch(`${n}/stocks${e?`?query=${e}`:""}`);if(!s.ok)throw console.error("API response not ok:",s.status),Error("API 요청 실패");let t=await s.json();return console.log("Received data:",t),t}catch(e){return console.error("주식 데이터 조회 실패:",e),[]}},i=async(e,s)=>{try{let t=await fetch(`${n}/trade`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,...s})});if(!t.ok)throw Error("거래 실패");return t.json()}catch(e){throw console.error("거래 실패:",e),e}},o=async e=>{try{let s=await fetch(`${n}/portfolio?userId=${e}`);if(!s.ok)throw Error("포트폴리오 조회 실패");return s.json()}catch(e){return console.error("포트폴리오 조회 실패:",e),[]}},c=async e=>{try{let s=await fetch(`${n}/transactions?userId=${e}`);if(!s.ok)throw Error("거래내역 조회 실패");return s.json()}catch(e){return console.error("거래내역 조회 실패:",e),[]}},d=async e=>{try{let s=await fetch(`${n}/users/${e}`);if(!s.ok)throw Error("사용자 정보 조회 실패");return s.json()}catch(e){throw console.error("사용자 정보 조회 실패:",e),e}};function x({stocks:e,onSelectStock:s}){return r.jsx("div",{className:"space-y-2",children:e.map(e=>r.jsx("div",{className:"p-2 border rounded cursor-pointer hover:bg-gray-100",onClick:()=>s(e),children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:[e.name," (",e.symbol,")"]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:e.change>=0?"text-green-600":"text-red-600",children:[e.price.toLocaleString()," 원"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.change.toFixed(2),"%"]})]})]})},e.symbol))})}function u({stock:e}){let[s,t]=(0,a.useState)(0),n=async r=>{if(!e)return;let a={symbol:e.symbol,quantity:s,type:r};try{await i(1,a),alert(`${"BUY"===r?"매수":"매도"} 주문이 완료되었습니다.`),t(0)}catch(e){alert("주문 처리 중 오류가 발생했습니다.")}};return e?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-bold",children:e.name}),(0,r.jsxs)("p",{children:["현재가: ",e.price.toLocaleString()," 원"]})]}),(0,r.jsxs)("div",{children:[r.jsx("input",{type:"number",value:s,onChange:e=>t(Number(e.target.value)),placeholder:"수량",className:"w-full p-2 border rounded mb-2"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>n("BUY"),className:"bg-red-500 text-white p-2 rounded",children:"매수"}),r.jsx("button",{onClick:()=>n("SELL"),className:"bg-blue-500 text-white p-2 rounded",children:"매도"})]})]})]}):r.jsx("p",{children:"종목을 선택해주세요"})}function h({userId:e}){let[s,t]=(0,a.useState)([]);(0,a.useEffect)(()=>{n()},[e]);let n=async()=>{try{let s=await o(e);t(s)}catch(e){console.error("포트폴리오 로딩 실패:",e)}};return(0,r.jsxs)("div",{className:"border rounded p-4",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"보유 종목"}),0===s.length?r.jsx("p",{children:"보유 중인 종목이 없습니다."}):r.jsx("div",{className:"space-y-2",children:s.map(e=>(0,r.jsxs)("div",{className:"flex justify-between p-2 border rounded",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-semibold",children:e.stock_master.name}),(0,r.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.symbol,")"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{children:[e.quantity,"주"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["평균단가: ",e.average_price.toLocaleString(),"원"]})]})]},e.symbol))})]})}function m({userId:e}){let[s,t]=(0,a.useState)([]);(0,a.useEffect)(()=>{n()},[e]);let n=async()=>{try{let s=await c(e);t(s)}catch(e){console.error("거래 내역 로딩 실패:",e)}};return(0,r.jsxs)("div",{className:"border rounded p-4",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"거래 내역"}),0===s.length?r.jsx("p",{children:"거래 내역이 없습니다."}):r.jsx("div",{className:"space-y-2",children:s.map(e=>(0,r.jsxs)("div",{className:"flex justify-between p-2 border rounded",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"BUY"===e.type?"text-red-600":"text-blue-600",children:"BUY"===e.type?"매수":"매도"}),r.jsx("span",{className:"ml-2",children:e.stock_master.name})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{children:[e.quantity,"주"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.price.toLocaleString(),"원"]})]})]},e.id))})]})}function p({userId:e}){let[s,t]=(0,a.useState)(null);(0,a.useEffect)(()=>{n()},[e]);let n=async()=>{try{let s=await d(e);t(s)}catch(e){console.error("사용자 정보 로딩 실패:",e)}};return s?(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"계좌 정보"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-600",children:"사용자명"}),r.jsx("p",{className:"text-lg font-semibold",children:s.username})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-600",children:"보유 현금"}),(0,r.jsxs)("p",{className:"text-lg font-semibold",children:[s.cash_balance.toLocaleString(),"원"]})]})]})]}):null}function j(){let[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)(null),[i,o]=(0,a.useState)("");return(0,a.useEffect)(()=>{(async()=>{s(await l(i))})()},[i]),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(p,{userId:1}),r.jsx(h,{userId:1}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"border rounded p-4",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"주식 검색"}),r.jsx("div",{className:"mb-4",children:r.jsx("input",{type:"text",value:i,onChange:e=>{o(e.target.value)},placeholder:"종목 검색...",className:"w-full p-2 border rounded"})}),r.jsx(x,{stocks:e,onSelectStock:n})]}),(0,r.jsxs)("div",{className:"border rounded p-4",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"가상 매매"}),r.jsx(u,{stock:t})]})]}),r.jsx(m,{userId:1})]})}},1342:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i,metadata:()=>l});var r=t(5036),a=t(3640),n=t.n(a);t(5023);let l={title:"주식 가상매매 시뮬레이터",description:"주식 거래 시뮬레이션 및 분석 플랫폼"};function i({children:e}){return r.jsx("html",{lang:"ko",children:(0,r.jsxs)("body",{className:n().className,children:[r.jsx("nav",{className:"bg-gray-800 text-white p-4",children:r.jsx("div",{className:"container mx-auto",children:r.jsx("h1",{className:"text-xl font-bold",children:"주식 가상매매 시뮬레이터"})})}),r.jsx("main",{className:"container mx-auto p-4",children:e})]})})}},1136:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let r=(0,t(6843).createProxy)(String.raw`C:\Coding\Virtual Trader\src\app\page.tsx`),{__esModule:a,$$typeof:n}=r,l=r.default},5023:()=>{}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,225],()=>t(2739));module.exports=r})();